<html><head><meta charset="UTF-8"><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-csharp.min.js"></script><style>
        .article {
            position: relative;
            padding-bottom: 24px;
        }
        

        .bordered-element-rounded {
            border: 1px solid #c4c4c4;
            border-radius: 7px;
            overflow: hidden;
        }
        

        .code-block {
            overflow: hidden;
            position: relative;
            padding: 0;
            border-radius: 8px;
            font-variant-ligatures: none;
            background-color: rgba(25, 25, 28, .05);
            word-break: break-all;
        }
        

        .control {
            color: #19191c;
            font-size: 16px;
            font-weight: 670;
        }
        

        .detached {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-bottom: 8px;
        }
        

        .emphasis {
            color: inherit;
            font-weight: inherit;
            font-style: italic;
        }
        

        .flex {
            display: flex;
        }
        

        .inline-code {
            border-radius: 4px;
            display: inline;
            padding: 2px 1px;
            font-family: JetBrains Sans,monospace;
            background: #e6e6e6;
        }
        

        .list {
            list-style-type: disc;
            padding-left: 0;
            margin-left: 15px;
        }
        

        .list-item {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-left: 4px;
        }
        

        .main-title {
            padding-bottom: 24px;
            margin-top: 0;
            font-size: 40px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .note {
            background: rgba(77, 187, 95, .2);
        }
        

        .prism {
            page-break-inside: avoid;
        }
        
        /* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apex+apl+applescript+aql+arduino+arff+armasm+arturo+asciidoc+aspnet+asm6502+asmatmel+autohotkey+autoit+avisynth+avro-idl+awk+bash+basic+batch+bbcode+bbj+bicep+birb+bison+bnf+bqn+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cfscript+chaiscript+cil+cilkc+cilkcpp+clojure+cmake+cobol+coffeescript+concurnas+csp+cooklang+coq+crystal+css-extras+csv+cue+cypher+d+dart+dataweave+dax+dhall+diff+django+dns-zone-file+docker+dot+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+false+firestore-security-rules+flow+fortran+ftl+gml+gap+gcode+gdscript+gedcom+gettext+gherkin+git+glsl+gn+linker-script+go+go-module+gradle+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+hoon+http+hpkp+hsts+ichigojam+icon+icu-message-format+idris+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jexl+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keepalived+keyman+kotlin+kumir+kusto+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+log+lolcode+lua+magma+makefile+markdown+markup-templating+mata+matlab+maxscript+mel+mermaid+metafont+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nevod+nginx+nim+nix+nsis+objectivec+ocaml+odin+opencl+openqasm+oz+parigp+parser+pascal+pascaligo+psl+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plant-uml+plsql+powerquery+powershell+processing+prolog+promql+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+qsharp+q+qml+qore+r+racket+cshtml+jsx+tsx+reason+regex+rego+renpy+rescript+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+squirrel+stan+stata+iecst+stylus+supercollider+swift+systemd+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+tremor+turtle+twig+typescript+typoscript+unrealscript+uorazor+uri+v+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+web-idl+wgsl+wiki+wolfram+wren+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=highlight-keywords */
code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:16px;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

        

        .prompt {
            flex-direction: row;
            letter-spacing: .0015em;
            font-size: 16px;
            font-weight: 400;
            line-height: 24px;
            margin-left: 0;
            margin-right: 0;
        }
        

        .prompt-content {
            padding: 15px;
            overflow: hidden;
            flex: 1 1 auto;
        }
        

        .prompt-content-p p {
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .prompt-icon {
            flex: 0 0 auto;
            margin-left: 15px;
            margin-top: 15px;
            fill: currentcolor;
            width: 24px;
            height: 24px;
        }
        

        :root {
            width: 95%;
            max-width: 95vw;
            padding: 0 0 0 30px;
        }
        
        body {
            font-family: JetBrains Sans,serif;
        }
        
        a {
            overflow-wrap: anywhere;
            width: 100vw;
        }
        
        
        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff) format("woff");
            font-weight: 300;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff) format("woff");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff) format("woff");
            font-weight: 600;
            font-style: normal;
        }
        
        
        code {
            display: inline;
            word-break: break-word;
            font-size: 15px;
            line-height: inherit;
            font-variant-ligatures: none;
            font-family: JetBrains Sans,monospace;
            white-space: pre-line;
            overflow-wrap: break-word;
        }
        
        figcaption {
            margin-top: 5px;
        }
        
        h2 {
            padding-top: 16px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h3 {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h4 {
            padding-top: 4px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        p {
            padding: 0;
            border: 0;
            line-height: 25px;
            margin-block-start: 0;
            margin-block-end: 0;
            padding-bottom: 8px;
        }
        
        div {
            display: block;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #c4c4c4;
            padding: 10px;
            text-align: left;
            word-break: break-all;
        }
        
        .entry {
            display: grid;
            grid-template-columns: auto max-content;
            grid-template-areas: "chapter page";
            align-items: end;
            gap: 0 .25rem;
            line-height: 25px;
        }
        
        .toc-link-container{
            grid-area: chapter;
            position: relative;
            overflow: hidden;
        }
        
        .toc-link{
            text-decoration: none;
            color: black;
        }
        
        .toc-link-container::after {
            position: absolute;
            padding-left: .25ch;
            content: " . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";
            text-align: right;
        }
        
        .page {
            grid-area: page;
            width: 30px;
            text-align: right;
        }
        

        .topic {
            page-break-before: always;
        }
        

        .warning {
            background: rgba(244, 92, 74, .2);
        }
        </style></head><body><div><section class="topic"><div><article class="article"><h1 class="main-title">Table of contents</h1><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1703914554">Introduction</a></div><div class="page">2</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-72717308">Systems</a></div><div class="page">3</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1659125106">Core</a></div><div class="page">5</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1776545095">Events</a></div><div class="page">6</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#215564444">Identification</a></div><div class="page">11</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-3604556">Numerics</a></div><div class="page">14</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1100816956">Priority</a></div><div class="page">18</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1549674828">Utility</a></div><div class="page">20</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1867871950">Initialization</a></div><div class="page">21</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-2054205743">Properties and configuration</a></div><div class="page">23</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#941151517">Singleton</a></div><div class="page">30</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-2050905776">Values</a></div><div class="page">31</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#916674799">Economy</a></div><div class="page">37</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-524164319">Status</a></div><div class="page">40</div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1703914554">Introduction</h1><p id="1703914554#-mnaih0_3">Fast Unity Creation Kit is a framework designed to make creating games in Unity faster and easier especially for beginners and solo developers. It is designed to be easy to use and understand, and to be as flexible as possible. It is designed to be used with modern Unity versions, however most of the features should work with older versions as well.</p><section><h2 id="1703914554#concepts" data-toc="concepts#Introduction.md-concepts">Concepts</h2><section><h3 id="1703914554#interfacing" data-toc="interfacing#Introduction.md-interfacing">Interfacing</h3><p id="1703914554#-mnaih0_8">Most of the features in Fast Unity Creation Kit are accessed through C# interfaces. This is done to make it easier to use the features in your own code, and to make it easier to understand how the features work.</p><p id="1703914554#-mnaih0_9">Interfaces are a way to implement multiple inheritance in C#, and are used to define a logic class that can be implemented by other classes. With this solution Unity Component layer and logic layer can be separated, making it easier to understand and maintain the code.</p></section><section><h3 id="1703914554#components" data-toc="components#Introduction.md-components">Components</h3><p id="1703914554#-mnaih0_10">Some of the features in Fast Unity Creation Kit are implemented as Unity Components, so it can be quickly added to GameObjects in the scene. These components are designed to be plug-and-play with minimal configuration required.</p></section><section><h3 id="1703914554#scriptable-objects" data-toc="scriptable-objects#Introduction.md-scriptable-objects">Scriptable Objects</h3><p id="1703914554#-mnaih0_11">Fast Unity Creation Kit tries to avoid using Scriptable Objects as much as possible, as they can lead to a lot of performance issues and are difficult to debug. However, some features are implemented as Scriptable Objects - especially those that need to be shared between multiple GameObjects like configuration data.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-72717308">Systems</h1><p id="-72717308#-35fk0g_3">There are many systems in Fast Unity Creation Kit that are designed to make creating games in Unity faster and easier. Most of them are based on other games or game development frameworks and used widely across multiple game genres.</p><p id="-72717308#-35fk0g_4">This introduction contains a brief overview of the systems in Fast Unity Creation Kit. For more detailed information, please refer to the individual system documentation in this document.</p><section><h2 id="-72717308#existing-systems" data-toc="existing-systems#Systems.md-existing-systems">Existing systems</h2><ul class="list" id="-72717308#-35fk0g_6" start="1"><li class="list-item" id="-72717308#-35fk0g_7"><p>Core (<a href="#-1659125106">Core</a>) - The core system of Fast Unity Creation Kit. It contains the basic functionality that is used by other systems.</p></li><li class="list-item" id="-72717308#-35fk0g_8"><p> - The building system is used to manage the building in the game. It is used to create and manage the building of structures, houses, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_9"><p> - The combat system is used to manage the combat in the game. It is used to create and manage the combat between the player and enemies.</p></li><li class="list-item" id="-72717308#-35fk0g_10"><p> - The entities system is used to manage the entities in the game. It is used to create and manage the entities in the game - players, enemies, NPCs, in-world destructible objects, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_11"><p> - The farming system is used to manage the farming in the game. It is used to create and manage the farming of crops, animals, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_12"><p> - The dialogue system is used to manage the dialogue in the game. It is used to create conversations between characters in the game.</p></li><li class="list-item" id="-72717308#-35fk0g_13"><p>Economy (<a href="#916674799">Economy</a>) - The economy system is used to manage the economy in the game. It is used to create and manage the economy of the game - gold, but also health is considered as a local currency of an entity.</p></li><li class="list-item" id="-72717308#-35fk0g_14"><p> - The inventory system is used to manage the inventory of the player. It is used to store items, weapons, armor, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_15"><p> - The quest system is used to manage the quests in the game. It is used to create and manage quests for the player to complete.</p></li><li class="list-item" id="-72717308#-35fk0g_16"><p>Status (<a href="#-524164319">Status</a>) - The status system is used to manage the status of objects in the game. It is used mostly to provide status effects like poison, slow, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_17"><p> - The time system is used to manage the time in the game. It is used to call events when the time changes, like day-night cycle, turn-based combat, etc.</p></li><li class="list-item" id="-72717308#-35fk0g_18"><p> - The UI system is used to manage the user interface in the game. It is used to create and manage the user interface of the game - health bars, inventory, etc.</p></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1659125106">Core</h1><p id="-1659125106#z8np0o_3">Core is a package of commonly used classes and interfaces that are used by other systems in Fast Unity Creation Kit.</p><p id="-1659125106#z8np0o_4">The subsystems of the Core system are:</p><ul class="list" id="-1659125106#z8np0o_5" start="1"><li class="list-item" id="-1659125106#z8np0o_6"><p>Events (<a href="#1776545095">Events</a>) - The events system is used to manage the events in the game. It is used to create and manage the events that can be triggered by the player or the game itself. This subsystem is designed to separate other systems from each other, so they can be easily replaced or extended.</p></li><li class="list-item" id="-1659125106#z8np0o_7"><p>Identification (<a href="#215564444">Identification</a>) - The identification system is used to manage the identification of objects in the game. It is used to create and manage the identification of objects in the game - players, enemies, NPCs, in-world destructible objects, etc.</p></li><li class="list-item" id="-1659125106#z8np0o_8"><p>Numerics (<a href="#-3604556">Numerics</a>) - The numerics system is used to manage the numerical values in the game. It is used as an overlay to C# built-in types to provide easier and more flexible way to work with numbers via interfaces like <span class="inline-code" id="-1659125106#z8np0o_15">INumber</span>.</p></li><li class="list-item" id="-1659125106#z8np0o_9"><p>Priority (<a href="#-1100816956">Priority</a>) - The priority system is used to manage the priority of objects in the game. It is used to create prioritized lists of objects, so they are automatically sorted.</p></li><li class="list-item" id="-1659125106#z8np0o_10"><p>Utility (<a href="#1549674828">Utility</a>) - The utility system is used to manage object properties. It can handle object with name, description, icons, prefabs, etc.</p></li><li class="list-item" id="-1659125106#z8np0o_11"><p>Values (<a href="#-2050905776">Values</a>) - The values system is used to manage the values of objects in the game. It is used to create dynamically modifiable values - for example maximum health that can be affected by status effects or equipment.</p></li></ul></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1776545095">Events</h1><p id="1776545095#uk7adr_3">Events is a package of classes and interfaces that are used to manage the events in the game. It is used to create and manage the events that can be triggered by the player or the game itself. This subsystem is designed to separate other systems from each other, so they can be easily replaced or extended.</p><section><h2 id="1776545095#concepts" data-toc="concepts#SystemCoreEvents.md-concepts">Concepts</h2><p id="1776545095#uk7adr_10">Events are a way to communicate between different parts of the game. They are used to trigger actions in response to certain conditions, like player input, game state changes, etc. Events are a way to decouple different parts of the game, so they can be easily replaced or extended without affecting other parts of the game. Thanks to this system this project is completely modular and modules are independent of each other.</p><p id="1776545095#uk7adr_11">The core of Events system is the <span class="inline-code" id="1776545095#uk7adr_17">EventChannel&lt;TSelf&gt;</span> class. It is a base class for all event channels in the game. It contains methods to register and unregister event listeners, and to trigger the event. It also contains separate generic type to add ability to pass data with the event.</p><div class="detached code-block" id="1776545095#uk7adr_12"><pre><code class="language-csharp">public abstract class EventChannel : EventChannelBase&lt;EventChannelCallback&gt;

public abstract class EventChannel&lt;TChannelData&gt; : EventChannelBase&lt;EventChannelCallback&lt;TChannelData&gt;&gt; 
        where TChannelData : IEventChannelData</code></pre></div><p id="1776545095#uk7adr_13">This represents a local event channel that can be attached to an object.</p><p id="1776545095#uk7adr_14">There are also global event channels that are used to broadcast events to all objects in the game. They are implemented as singletons, so they can be accessed from anywhere in the game.</p><div class="detached code-block" id="1776545095#uk7adr_15"><pre><code class="language-csharp">public abstract class GlobalEventChannel&lt;TSelf&gt; : EventChannel
        where TSelf : GlobalEventChannel&lt;TSelf&gt;, new()

public abstract class GlobalEventChannel&lt;TSelf, TChannelData&gt; : EventChannel&lt;TChannelData&gt;
        where TSelf : GlobalEventChannel&lt;TSelf, TChannelData&gt;, new()
        where TChannelData : IEventChannelData</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>In most cases you will use GlobalEventChannel, as it is more flexible and easier to use. Local events are a possibility if you need to trigger events only on a specific object or link events to a specific object when that event is used to communicate between components on the same object.</p></div>
</blockquote>
</section><section><h2 id="1776545095#creating-events" data-toc="creating-events#SystemCoreEvents.md-creating-events">Creating Events</h2><p id="1776545095#uk7adr_18">To create an event you need to extend <span class="inline-code" id="1776545095#uk7adr_24">GlobalEventChannel&lt;TSelf&gt;</span> or <span class="inline-code" id="1776545095#uk7adr_25">EventChannel&lt;TSelf&gt;</span> via a custom class. The <span class="inline-code" id="1776545095#uk7adr_26">TSelf</span> type parameter should be the type of the class you are extending as.</p><p id="1776545095#uk7adr_19">Event Channels also support secondary type parameter <span class="inline-code" id="1776545095#uk7adr_27">TData</span> which is the type of the data that will be passed with the event, that type needs to extend <span class="inline-code" id="1776545095#uk7adr_28">IEventChannelData</span> interface.</p><div class="detached code-block" id="1776545095#uk7adr_20"><pre><code class="language-csharp">public class MyGlobalEventChannel : GlobalEventChannel&lt;MyGlobalEventChannel&gt;
{
    // You can also override Trigger method to add custom logic    
    public override void Trigger()
    {       
        Debug.Log(&quot;Hello world!&quot;);
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If you don't call base Trigger method in your custom Trigger method, the event will not be triggered on listeners and thus the created event can be considered a virtual event (event without listeners).</p></div>
</blockquote>
<p id="1776545095#uk7adr_22">You can also create an event that passes data with it.</p><div class="detached code-block" id="1776545095#uk7adr_23"><pre><code class="language-csharp">public readonly struct MyEventData : IEventChannelData
{
    public readonly string message;
    
    public MyEventData(string message)
    {
        this.message = message;
    }
}

public class MyGlobalEventChannelWithData : GlobalEventChannel&lt;MyGlobalEventChannelWithData, MyEventData&gt;
{

}</code></pre></div></section><section><h2 id="1776545095#listening-to-events" data-toc="listening-to-events#SystemCoreEvents.md-listening-to-events">Listening to Events</h2><p id="1776545095#uk7adr_29">To listen to an event you need to access the event channel and subscribe to it. For global events, you can use the static <span class="inline-code" id="1776545095#uk7adr_33">RegisterEventListener</span> method to subscribe to the event. But you can also use the instance of the event channel and call <span class="inline-code" id="1776545095#uk7adr_34">RegisterListener</span> method directly.</p><div class="detached code-block" id="1776545095#uk7adr_30"><pre><code class="language-csharp">public class MyListener : MonoBehaviour
{
    private void Start()
    {
        MyGlobalEventChannel.RegisterEventListener(ExampleCallback);
    }
    
    private void ExampleCallback()
    {
        Debug.Log(&quot;Event triggered!&quot;);
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If you want to pass data with the event, you need to subscribe to the event with a callback that accepts the data as a parameter.</p></div>
</blockquote>
<div class="detached code-block" id="1776545095#uk7adr_32"><pre><code class="language-csharp">public class MyListener : MonoBehaviour
{
    private void Start()
    {
        MyGlobalEventChannelWithData.RegisterEventListener(ExampleCallback);
    }
    
    private void ExampleCallback(MyEventData data)
    {
        Debug.Log(&quot;Event triggered with data: &quot; + data.Message);
    }
}</code></pre></div></section><section><h2 id="1776545095#triggering-events" data-toc="triggering-events#SystemCoreEvents.md-triggering-events">Triggering Events</h2><p id="1776545095#uk7adr_35">To trigger an event you need to access the event channel and call the <span class="inline-code" id="1776545095#uk7adr_39">Trigger</span> method. Global events also have stacic <span class="inline-code" id="1776545095#uk7adr_40">TriggerEvent</span> method that can be used to trigger the event from anywhere in the game.</p><div class="detached code-block" id="1776545095#uk7adr_36"><pre><code class="language-csharp">public class MyTrigger : MonoBehaviour
{
    private void Start()
    {
        MyGlobalEventChannel.TriggerEvent();
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If you want to pass data with the event, you need to call the `Trigger` method with the data as a parameter.</p></div>
</blockquote>
<div class="detached code-block" id="1776545095#uk7adr_38"><pre><code class="language-csharp">public class MyTrigger : MonoBehaviour
{
    private void Start()
    {
        MyGlobalEventChannelWithData.TriggerEvent(new MyEventData(&quot;Hello world!&quot;));
    }
}</code></pre></div></section><section><h2 id="1776545095#unsubscribing-from-events" data-toc="unsubscribing-from-events#SystemCoreEvents.md-unsubscribing-from-events">Unsubscribing from Events</h2><p id="1776545095#uk7adr_41">To unsubscribe from an event you can access the instance and use the <span class="inline-code" id="1776545095#uk7adr_43">UnregisterListener</span> method or when using global events you can use the static <span class="inline-code" id="1776545095#uk7adr_44">UnregisterEventListener</span> method.</p><p id="1776545095#uk7adr_42">For more reference go back up to the <span class="control" id="1776545095#uk7adr_45"><span class="emphasis" id="1776545095#uk7adr_46">Listening to Events</span></span> section.</p></section><section><h2 id="1776545095#handling-local-events" data-toc="handling-local-events#SystemCoreEvents.md-handling-local-events">Handling local events</h2><p id="1776545095#uk7adr_47">Local events are events that are only triggered on the object that the event channel is attached to. You do everything almost the same as with global events, but you need to use <span class="inline-code" id="1776545095#uk7adr_48">EventChannel&lt;TSelf&gt;</span> instead of <span class="inline-code" id="1776545095#uk7adr_49">GlobalEventChannel&lt;TSelf&gt;</span> and you need to call methods on the instance of the event channel.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="215564444">Identification</h1><p id="215564444#ylv5qy_3">Identification is a package that contains basic identifier and identifiable object framework. Identifiers are <span class="inline-code" id="215564444#ylv5qy_7">readonly structs</span> to ensure that they are immutable and can be used as keys.</p><section><h2 id="215564444#core-interfaces" data-toc="core-interfaces#SystemCoreIdentification.md-core-interfaces">Core interfaces</h2><section><h3 id="215564444#iidentifier" data-toc="iidentifier#SystemCoreIdentification.md-iidentifier">IIdentifier</h3><p id="215564444#ylv5qy_13">Represents an identifier - a unique or non-unique identifier of an object.</p></section><section><h3 id="215564444#iuniqueidentifier" data-toc="iuniqueidentifier#SystemCoreIdentification.md-iuniqueidentifier">IUniqueIdentifier</h3><p id="215564444#ylv5qy_14">Represents a unique identifier - an identifier that is unique within a context.</p></section><section><h3 id="215564444#inumberidentifier" data-toc="inumberidentifier#SystemCoreIdentification.md-inumberidentifier">INumberIdentifier</h3><p id="215564444#ylv5qy_15">Represents a number identifier - an identifier that is a number as a value. <span class="inline-code" id="215564444#ylv5qy_16">TNumber</span> is a type of the number that inherits from <span class="inline-code" id="215564444#ylv5qy_17">INumber</span> interface from <span class="inline-code" id="215564444#ylv5qy_18">Core.Numerics</span> package.</p></section><section><h3 id="215564444#iidentifiable" data-toc="iidentifiable#SystemCoreIdentification.md-iidentifiable">IIdentifiable</h3><p id="215564444#ylv5qy_19">Represents an object that can be identified by an identifier. <span class="inline-code" id="215564444#ylv5qy_20">TIdentifier</span> is a type of the identifier which inherits from <span class="inline-code" id="215564444#ylv5qy_21">IIdentifier</span> interface.</p></section><section><h3 id="215564444#iuniqueidentifiable" data-toc="iuniqueidentifiable#SystemCoreIdentification.md-iuniqueidentifiable">IUniqueIdentifiable</h3><p id="215564444#ylv5qy_22">Represents an object that can be identified by a unique identifier. <span class="inline-code" id="215564444#ylv5qy_24">TIdentifier</span> is a type of the identifier which inherits from <span class="inline-code" id="215564444#ylv5qy_25">IIdentifier</span> interface. This interface does not require <span class="inline-code" id="215564444#ylv5qy_26">TIdentifier</span> to inherit from <span class="inline-code" id="215564444#ylv5qy_27">IUniqueIdentifier</span> interface as it is in programmer's responsibility to ensure that the identifier is unique within a given context.</p><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>While using IUniqueIdentifiable interface, it is programmer's responsibility to ensure that the identifier is unique within a given context.</p></div>
</blockquote>
</section></section><section><h2 id="215564444#implemented-identifiers" data-toc="implemented-identifiers#SystemCoreIdentification.md-implemented-identifiers">Implemented identifiers</h2><section><h3 id="215564444#snowflake128" data-toc="snowflake128#SystemCoreIdentification.md-snowflake128">Snowflake128</h3><p id="215564444#ylv5qy_30">A 128-bit identifier that is generated using the Snowflake algorithm. It is guaranteed to be unique within a given context. First 64 bits are a timestamp, next 32 bits are identifier data (e.g. worker ID), next 16 bits are another pack of identifier data (e.g. process ID), next 8 bits are reserved and remaining 8 bits indicates if the identifier is null.</p></section><section><h3 id="215564444#numeric-identifiers" data-toc="numeric-identifiers#SystemCoreIdentification.md-numeric-identifiers">Numeric identifiers</h3><ul class="list" id="215564444#ylv5qy_31" start="1"><li class="list-item" id="215564444#ylv5qy_32"><p>ID8 - A simple 8-bit number used as an identifier.</p></li><li class="list-item" id="215564444#ylv5qy_33"><p>ID16 - A simple 16-bit number used as an identifier.</p></li><li class="list-item" id="215564444#ylv5qy_34"><p>ID32 - A simple 32-bit number used as an identifier.</p></li><li class="list-item" id="215564444#ylv5qy_35"><p>ID64 - A simple 64-bit number used as an identifier.</p></li></ul></section></section><section><h2 id="215564444#creating-custom-identifiers" data-toc="creating-custom-identifiers#SystemCoreIdentification.md-creating-custom-identifiers">Creating custom identifiers</h2><p id="215564444#ylv5qy_36">You can also create custom identifiers by implementing <span class="inline-code" id="215564444#ylv5qy_40">IIdentifier</span> interface. An example of a custom identifier is shown below:</p><div class="detached code-block" id="215564444#ylv5qy_37"><pre><code class="language-csharp">public readonly struct CustomIdentifier : IIdentifier
{
    // It is not recommended to use managed types within identifiers.
    // However this is just an example for demonstration purposes.
    public readonly string value;

    public CustomIdentifier(string value)
    {
        this.value = value;
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is also recommended to implement IEquatable{TSelf} interface for custom identifiers.</p></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is not recommended to use managed types within identifiers as it may lead to performance issues.</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-3604556">Numerics</h1><p id="-3604556#iu0kn6_3">Numerics is a low-level API for working with numbers in Fast Unity Creation Kit. It provides a set of interfaces and classes that can be used to work with numbers in a more flexible way than the built-in C# types. Thanks to included interfaces and primitive structures you can easily extend the functionality of the built-in types and create your own types that can be used in the same way as the built-in types.</p><section><h2 id="-3604556#concepts" data-toc="concepts#SystemCoreNumerics.md-concepts">Concepts</h2><p id="-3604556#iu0kn6_7">The generic concept of the Numerics API is that all numbers can be cast to their underlying type and back without any cost. This is done thanks to explicit structure implementations with pointer/reinterpret casting, which compiled by IL2CPP compiler or Burst compiler will be optimized to the same code as built-in types.</p><p id="-3604556#iu0kn6_8">For example:</p><div class="detached code-block" id="-3604556#iu0kn6_9"><pre><code class="language-csharp">public void Test()
{
    float32 a = 1.0f;
    float32 b = 2.0f;
    
    float32 c = a + b;
}</code></pre></div><p id="-3604556#iu0kn6_10">Will be compiled to same code as:</p><div class="detached code-block" id="-3604556#iu0kn6_11"><pre><code class="language-csharp">public void Test()
{
    float a = 1.0f;
    float b = 2.0f;
    
    float c = a + b;
}</code></pre></div><p id="-3604556#iu0kn6_12">Because at assembly-level types do not exist. This allows for way more flexible numbers approach and <span class="inline-code" id="-3604556#iu0kn6_13">INumber</span> interface used to provide an easy way to require a number as a generic type in your methods or classes.</p></section><section><h2 id="-3604556#interfaces" data-toc="interfaces#SystemCoreNumerics.md-interfaces">Interfaces</h2><section><h3 id="-3604556#inumber" data-toc="inumber#SystemCoreNumerics.md-inumber">INumber</h3><p id="-3604556#iu0kn6_23">This is base interface for all numbers in Numerics API. It provides basic arithmetic operations, however those operations are only used if direct number type is not known - if you perform an operation where at least one of the operands is interface itself.</p><p id="-3604556#iu0kn6_24">Those math operations requires both numbers to support generic version of <span class="inline-code" id="-3604556#iu0kn6_25">ISupportsFloatConversion</span> interface.</p></section><section><h3 id="-3604556#isupportsfloatconversion" data-toc="isupportsfloatconversion#SystemCoreNumerics.md-isupportsfloatconversion">ISupportsFloatConversion</h3><p id="-3604556#iu0kn6_26">Represents a number that can be converted to float (or double). This is used to provide a way to convert any number to float or double, which is required for basic arithmetic operations on unknown types. This is especially useful for <span class="inline-code" id="-3604556#iu0kn6_27">INumber</span> interface, where you can't know the exact type of the number and thus for modifiable values / modifiers.</p></section><section><h3 id="-3604556#iwithmaxlimit" data-toc="iwithmaxlimit#SystemCoreNumerics.md-iwithmaxlimit">IWithMaxLimit</h3><p id="-3604556#iu0kn6_28">Represents that an object has maximum limit. This is not supported by numbers themselves, but is a numeric-related utility interface that can be used to provide maximum limit for a number. An example usage can be status stacking with a limit of stack count - like burning status can stack up to 5 times.</p></section><section><h3 id="-3604556#iwithminlimit" data-toc="iwithminlimit#SystemCoreNumerics.md-iwithminlimit">IWithMinLimit</h3><p id="-3604556#iu0kn6_29">Same as <span class="inline-code" id="-3604556#iu0kn6_30">IWithMaxLimit</span>, but for minimum limit.</p></section><section><h3 id="-3604556#iwithdefaultvalue" data-toc="iwithdefaultvalue#SystemCoreNumerics.md-iwithdefaultvalue">IWithDefaultValue</h3><p id="-3604556#iu0kn6_31">Represents that an object has default value. This is not supported by numbers themselves, but is a numeric-related utility interface that can be used to provide default value for a number. An example could be a modifiable value that has default value like health points with default value of 100.</p><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>In case of <b id="-3604556#iu0kn6_33">IWithMaxLimit</b>, <b id="-3604556#iu0kn6_34">IWithMinLimit</b> and <b id="-3604556#iu0kn6_35">IWithDefaultValue</b> interfaces, you should implement them in your class and provide custom logic for handling those limits and default values. The interfaces are only utility markers used to indicate your intentions.</p></div>
</blockquote>
</section><section><h3 id="-3604556#ifloatingpointnumber" data-toc="ifloatingpointnumber#SystemCoreNumerics.md-ifloatingpointnumber">IFloatingPointNumber</h3><p id="-3604556#iu0kn6_36">Marker interface indicating that number is floating point number.</p></section><section><h3 id="-3604556#isignednumber" data-toc="isignednumber#SystemCoreNumerics.md-isignednumber">ISignedNumber</h3><p id="-3604556#iu0kn6_37">Marker interface indicating that number is signed number.</p></section><section><h3 id="-3604556#iunsignednumber" data-toc="iunsignednumber#SystemCoreNumerics.md-iunsignednumber">IUnsignedNumber</h3><p id="-3604556#iu0kn6_38">Marker interface indicating that number is unsigned number.</p></section><section><h3 id="-3604556#ivectorizednumber" data-toc="ivectorizednumber#SystemCoreNumerics.md-ivectorizednumber">IVectorizedNumber</h3><p id="-3604556#iu0kn6_39">Marker interface indicating that number is vectorized number - tries to use SIMD/AVX instructions for calculations.</p></section></section><section><h2 id="-3604556#supported-numbers" data-toc="supported-numbers#SystemCoreNumerics.md-supported-numbers">Supported numbers</h2><p id="-3604556#iu0kn6_40">The implemented numbers are:</p><ul class="list" id="-3604556#iu0kn6_41" start="1"><li class="list-item" id="-3604556#iu0kn6_43"><p><span class="inline-code" id="-3604556#iu0kn6_56">float32</span> - 32-bit floating point number with internal value of <span class="inline-code" id="-3604556#iu0kn6_57">float</span></p></li><li class="list-item" id="-3604556#iu0kn6_44"><p><span class="inline-code" id="-3604556#iu0kn6_58">float64</span> - 64-bit floating point number with internal value of <span class="inline-code" id="-3604556#iu0kn6_59">double</span></p></li><li class="list-item" id="-3604556#iu0kn6_45"><p><span class="inline-code" id="-3604556#iu0kn6_60">int8</span> - 8-bit signed integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_61">sbyte</span></p></li><li class="list-item" id="-3604556#iu0kn6_46"><p><span class="inline-code" id="-3604556#iu0kn6_62">int16</span> - 16-bit signed integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_63">short</span></p></li><li class="list-item" id="-3604556#iu0kn6_47"><p><span class="inline-code" id="-3604556#iu0kn6_64">int32</span> - 32-bit signed integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_65">int</span></p></li><li class="list-item" id="-3604556#iu0kn6_48"><p><span class="inline-code" id="-3604556#iu0kn6_66">int64</span> - 64-bit signed integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_67">long</span></p></li><li class="list-item" id="-3604556#iu0kn6_49"><p><span class="inline-code" id="-3604556#iu0kn6_68">uint8</span> - 8-bit unsigned integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_69">byte</span></p></li><li class="list-item" id="-3604556#iu0kn6_50"><p><span class="inline-code" id="-3604556#iu0kn6_70">uint16</span> - 16-bit unsigned integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_71">ushort</span></p></li><li class="list-item" id="-3604556#iu0kn6_51"><p><span class="inline-code" id="-3604556#iu0kn6_72">uint32</span> - 32-bit unsigned integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_73">uint</span></p></li><li class="list-item" id="-3604556#iu0kn6_52"><p><span class="inline-code" id="-3604556#iu0kn6_74">uint64</span> - 64-bit unsigned integer with internal value of <span class="inline-code" id="-3604556#iu0kn6_75">ulong</span></p></li><li class="list-item" id="-3604556#iu0kn6_53"><p><span class="inline-code" id="-3604556#iu0kn6_76">v128</span> - 128-bit vectorized number with internal value of <span class="inline-code" id="-3604556#iu0kn6_77">int4</span></p></li><li class="list-item" id="-3604556#iu0kn6_54"><p><span class="inline-code" id="-3604556#iu0kn6_78">v256</span> - 256-bit vectorized number with internal value of <span class="inline-code" id="-3604556#iu0kn6_79">int4x2</span></p></li><li class="list-item" id="-3604556#iu0kn6_55"><p><span class="inline-code" id="-3604556#iu0kn6_80">v512</span> - 512-bit vectorized number with internal value of <span class="inline-code" id="-3604556#iu0kn6_81">int4x4</span></p></li></ul><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If you're unfamiliar with <b id="-3604556#iu0kn6_82">int4</b>, <b id="-3604556#iu0kn6_83">int4x2</b> and <b id="-3604556#iu0kn6_84">int4x4</b> types, they are numbers that are included in Unity.Mathematics package and are used to provide SIMD/AVX instructions for calculations. They are not directly supported by Numerics API, but are used to provide vectorized numbers.</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1100816956">Priority</h1><p id="-1100816956#z2uff02_3">Priority is a simple package that allows to sort objects in lists by their priority. It can be either used to create a <span class="inline-code" id="-1100816956#z2uff02_8">PrioritizedList&lt;TObject&gt;</span> of objects which is automatically sorted when a new object is &quot;added&quot; (aka. inserted) or to use a custom extension method <span class="inline-code" id="-1100816956#z2uff02_9">SortByPriority&lt;TObject&gt;</span> provided in <span class="inline-code" id="-1100816956#z2uff02_10">PriorityExtensions</span> class to sort any <span class="inline-code" id="-1100816956#z2uff02_11">IList&lt;TObject&gt;</span> by priority.</p><p id="-1100816956#z2uff02_4">All <span class="inline-code" id="-1100816956#z2uff02_12">TObject</span> should inherit from <span class="inline-code" id="-1100816956#z2uff02_13">IPrioritySupport</span> interface which provides a <span class="inline-code" id="-1100816956#z2uff02_14">Priority</span> property.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>The priority is sorted in ascending order, so the lower the priority, the closer to the beginning of the list the object will be. </p><p id="-1100816956#z2uff02_15"><b id="-1100816956#z2uff02_17">For example:</b> object A with priority 3 will be always before object B with priority 5. If both objects have the same priority, the order of insertion is unknown and the order of objects is not guaranteed.</p><p id="-1100816956#z2uff02_16">In case of PrioritizedList, the order of insertion allows to somewhat predict the order of objects with the same priority - objects will always be sorted by the inverse order of insertion - the first inserted object will be at the end of the list. You can consider this similar to a reverse-order sorting.</p></div>
</blockquote>
<section><h2 id="-1100816956#interfaces" data-toc="interfaces#Priority.md-interfaces">Interfaces</h2><section><h3 id="-1100816956#iprioritysupport" data-toc="iprioritysupport#Priority.md-iprioritysupport">IPrioritySupport</h3><p id="-1100816956#z2uff02_19">This interface should be implemented by all objects that should be sorted by priority.</p></section></section><section><h2 id="-1100816956#example-usage" data-toc="example-usage#Priority.md-example-usage">Example usage</h2><p id="-1100816956#z2uff02_20">Example prioritized object:</p><div class="detached code-block" id="-1100816956#z2uff02_21"><pre><code class="language-csharp">public class PrioritizedObjectA : IPrioritySupport
{
    public uint Priority =&gt; 3;
    
     public int CompareTo(IPrioritySupport other) =&gt; Priority.CompareTo(other.Priority);
}

public class PrioritizedObjectB : IPrioritySupport
{
    public uint Priority =&gt; 5;
    
     public int CompareTo(IPrioritySupport other) =&gt; Priority.CompareTo(other.Priority);
}</code></pre></div><p id="-1100816956#z2uff02_22">Example usage of <span class="inline-code" id="-1100816956#z2uff02_27">PrioritizedList&lt;TObject&gt;</span>:</p><div class="detached code-block" id="-1100816956#z2uff02_23"><pre><code class="language-csharp">var list = new PrioritizedList&lt;IPrioritySupport&gt;();
list.Add(new PrioritizedObjectB());
list.Add(new PrioritizedObjectA());

// list[0] is PrioritizedObjectA
// list[1] is PrioritizedObjectB</code></pre></div><p id="-1100816956#z2uff02_24">Of course, you can use the extension method <span class="inline-code" id="-1100816956#z2uff02_28">SortByPriority&lt;TObject&gt;</span> on any <span class="inline-code" id="-1100816956#z2uff02_29">IList&lt;TObject&gt;</span>:</p><div class="detached code-block" id="-1100816956#z2uff02_25"><pre><code class="language-csharp">var list = new List&lt;IPrioritySupport&gt;();
list.Add(new PrioritizedObjectB());
list.Add(new PrioritizedObjectA());

list.SortByPriority();

// list[0] is PrioritizedObjectA
// list[1] is PrioritizedObjectB</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is strongly recommended to avoid using SortByPriority on the list as it is not as efficient as PrioritizedList.</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1549674828">Utility</h1><p id="1549674828#kaapig_3">Utility is a package of commonly used classes and interfaces that support other systems of Fast Unity Creation Kit. It contains quite a bunch of other subsystems that can manage object properties like initialization state, name, description, icons, prefabs, etc.</p><p id="1549674828#kaapig_4">The subsystems of the Utility system are:</p><ul class="list" id="1549674828#kaapig_5" start="1"><li class="list-item" id="1549674828#kaapig_6"><p>Initialization (<a href="#1867871950">Initialization</a>) - The initialization system is used to manage the initialization of objects in the game.</p></li><li class="list-item" id="1549674828#kaapig_7"><p>Properties (<a href="#-2054205743">Properties and configuration</a>) - The properties system is used to manage the properties of objects in the game.</p></li><li class="list-item" id="1549674828#kaapig_8"><p>Singleton (<a href="#941151517">Singleton</a>) - The singleton system is used to manage the singleton objects in the game. It is used to create singleton objects that can be accessed from anywhere in the game.</p></li></ul></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1867871950">Initialization</h1><p id="1867871950#mkva08_3">Initialization is a package that contains the <span class="inline-code" id="1867871950#mkva08_6">IInitializable</span> interface responsible for initializing objects in the game. Any initializable object should implement this interface and provide custom logic calls to request initialization when needed.</p><section><h2 id="1867871950#implementation" data-toc="implementation#SystemCoreInitialization.md-implementation">Implementation</h2><p id="1867871950#mkva08_7">You need to implement the <span class="inline-code" id="1867871950#mkva08_13">IInitializable</span> interface in your class to make it initializable.</p><p id="1867871950#mkva08_8">Example for regular C# class:</p><div class="detached code-block" id="1867871950#mkva08_9"><pre><code class="language-csharp">public class MyInitializable : IInitializable
{
    bool IInitializable.InternalInitializationStatusStorage { get; set; }

    void IInitializable.OnInitialize()
    {
        // Initialization logic
        Debug.Log(&quot;MyInitializable initialized&quot;);
    }
    
    public MyInitializable()
    {
        // Request initialization
        this.Initialize();
    }
}</code></pre></div><p id="1867871950#mkva08_10">Example for Unity MonoBehaviour:</p><div class="detached code-block" id="1867871950#mkva08_11"><pre><code class="language-csharp">public class MyInitializable : MonoBehaviour, IInitializable
{
    bool IInitializable.InternalInitializationStatusStorage { get; set; }

    void IInitializable.OnInitialize()
    {
        // Initialization logic
        Debug.Log(&quot;MyInitializable initialized&quot;);
    }
    
    private void Awake()
    {
        // Request initialization
        this.Initialize();
    }
}</code></pre></div><p id="1867871950#mkva08_12">Property InternalInitializationStatusStorage on the interface is used to store the initialization status of the object. This is an internal property and should not be accessed directly, for that purposes you should use <span class="inline-code" id="1867871950#mkva08_14">IsInitialized</span> property.</p></section><section><h2 id="1867871950#initialization-with-multiple-entry-paths" data-toc="initialization-with-multiple-entry-paths#SystemCoreInitialization.md-initialization-with-multiple-entry-paths">Initialization with multiple entry paths</h2><p id="1867871950#mkva08_15">Initialization can be requested multiple times, but it will be executed only once. This is useful when you need to initialize an object from multiple entry points, and you don't know which one will be called first.</p><p id="1867871950#mkva08_16">Also, if you want to avoid using this.Initialize() method you can use <span class="inline-code" id="1867871950#mkva08_18">EnsureInitialized()</span> method that will initialize the object if it's not initialized yet. This method is clearer and more readable in some cases - when you want to ensure that the object is initialized, but you are not sure if it was already initialized.</p><p id="1867871950#mkva08_17">Using <span class="inline-code" id="1867871950#mkva08_19">EnsureInitialized()</span> method requires casing the object to <span class="inline-code" id="1867871950#mkva08_20">IInitializable</span> interface.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-2054205743">Properties and configuration</h1><p id="-2054205743#-i1jgjh_3">Properties are used to define a generic structure for basic object information, especially things like names, description, icons, prefabs, etc. This system is used to manage the properties of objects in the game.</p><section><h2 id="-2054205743#concepts" data-toc="concepts#SystemCoreUtilityProperties.md-concepts">Concepts</h2><p id="-2054205743#-i1jgjh_10">All properties have a context in which they exist. The context is a class that implements the <span class="inline-code" id="-2054205743#-i1jgjh_12">IUsageContext</span> interface. Thanks to this, the object can have multiple names/descriptions/icons/prefabs, etc. depending on the context in which it is used.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>With the properties system you can have both an icon for a enemy that is displayed in the quest log and a image that is displayed in bestiary.</p></div>
</blockquote>
</section><section><h2 id="-2054205743#usage" data-toc="usage#SystemCoreUtilityProperties.md-usage">Usage</h2><p id="-2054205743#-i1jgjh_13">To use the properties system, you need to create a class that implements the <span class="inline-code" id="-2054205743#-i1jgjh_18">IUsageContext</span> interface.</p><div class="detached code-block" id="-2054205743#-i1jgjh_14"><pre><code class="language-csharp">public class BestiaryContext : IUsageContext{}

public class QuestLogContext : IUsageContext{}</code></pre></div><p id="-2054205743#-i1jgjh_15">Then you can use properties in your own classes.</p><div class="detached code-block" id="-2054205743#-i1jgjh_16"><pre><code class="language-csharp">public class Enemy : MonoBehaviour, IWithIcon&lt;BestiaryContext&gt;, IWithIcon&lt;QuestLogContext&gt;
{
    [SerializeField] private Sprite bestiaryIcon;
    [SerializeField] private Sprite questLogIcon;

    Sprite IWithIcon&lt;BestiaryContext&gt;.Icon =&gt; bestiaryIcon;
    Sprite IWithIcon&lt;QuestLogContext&gt;.Icon =&gt; questLogIcon;
}</code></pre></div><p id="-2054205743#-i1jgjh_17">Of course there are way more properties that you can use.</p></section><section><h2 id="-2054205743#properties" data-toc="properties#SystemCoreUtilityProperties.md-properties">Properties</h2><p id="-2054205743#-i1jgjh_19">The properties system contains the following properties:</p><ul class="list" id="-2054205743#-i1jgjh_20" start="1"><li class="list-item" id="-2054205743#-i1jgjh_23"><p>IWithName - Interface that allows you to get the name of the object.</p></li><li class="list-item" id="-2054205743#-i1jgjh_24"><p>IWithLocalizedName - Interface that allows you to get the localized name of the object (compatible with Unity.Localization package)</p></li><li class="list-item" id="-2054205743#-i1jgjh_25"><p>IWithDescription - Interface that allows you to get the description of the object.</p></li><li class="list-item" id="-2054205743#-i1jgjh_26"><p>IWithLocalizedDescription - Interface that allows you to get the localized description of the object (compatible with Unity.Localization package)</p></li><li class="list-item" id="-2054205743#-i1jgjh_27"><p>IWithIcon - Interface that allows you to get the icon of the object.</p></li><li class="list-item" id="-2054205743#-i1jgjh_28"><p>IWithPrefab - Interface that allows you to get the prefab of the object - this one requires to specify prefab type in the generic parameter.</p></li><li class="list-item" id="-2054205743#-i1jgjh_29"><p>IWithConfiguration - Interface that allows you to get the configuration of the object.</p></li><li class="list-item" id="-2054205743#-i1jgjh_30"><p>IWithAssetReference - Interface that allows you to get the asset reference for the object - compatible with Unity.Addressables package.</p></li></ul><p id="-2054205743#-i1jgjh_21">There are also some additional interfaces that require implementation of custom logic:</p><ul class="list" id="-2054205743#-i1jgjh_22" start="1"><li class="list-item" id="-2054205743#-i1jgjh_31"><p>IConditionallyRemovable - Interface that allows you to check if the object should be removed.</p></li></ul></section><section><h2 id="-2054205743#about-the-configuration" data-toc="about-the-configuration#SystemCoreUtilityProperties.md-about-the-configuration">About the configuration</h2><p id="-2054205743#-i1jgjh_32">By default, Fast Unity Creation Kit uses standard C# classes for logic processing which is not the best way to integrate it with Unity. That's why the configuration is a <span class="inline-code" id="-2054205743#-i1jgjh_43">ScriptableObject</span> that can be created in the Unity Editor. This way you can easily create a configuration for your object and assign it to the object.</p><p id="-2054205743#-i1jgjh_33">To implement it within FastUnityCreationKit you need to create a class that implements the <span class="inline-code" id="-2054205743#-i1jgjh_44">IWithConfiguration</span> interface.</p><div class="detached code-block" id="-2054205743#-i1jgjh_34"><pre><code class="language-csharp">public class EnemyConfiguration : ScriptableObject
{
    [SerializeField] private LocalizedString name;
    [SerializeField] private LocalizedString description;
    [SerializeField] private Sprite icon;
}</code></pre></div><p id="-2054205743#-i1jgjh_35">Then you can use it in your class.</p><div class="detached code-block" id="-2054205743#-i1jgjh_36"><pre><code class="language-csharp">public abstract class Enemy : MonoBehaviour, IWithConfiguration&lt;EnemyConfiguration&gt;,
 IWithLocalizedName&lt;BestiaryContext&gt;, IWithLocalizedDescription&lt;BestiaryContext&gt;, 
 IWithIcon&lt;BestiaryContext&gt;
{
    [SerializeField] private EnemyConfiguration configuration;

    EnemyConfiguration IWithConfiguration&lt;EnemyConfiguration&gt;.Configuration =&gt; configuration;
    
    LocalizedString IWithLocalizedName&lt;BestiaryContext&gt;.Name =&gt; configuration.name;
    LocalizedString IWithLocalizedDescription&lt;BestiaryContext&gt;.Description =&gt; configuration.description;
    Sprite IWithIcon&lt;BestiaryContext&gt;.Icon =&gt; configuration.icon;
}</code></pre></div><p id="-2054205743#-i1jgjh_37">This solution allows for easy proxy-passing of the configuration to the object and way better safety on exposing object data to other systems like UI as you can easily validate if desired context is supported by the object and throw an exception if not.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If you want you can also skip implementation of configuration and hard-code the values in the object, but this is not recommended as it is not a good practice to hard-code values in the code. </p><p id="-2054205743#-i1jgjh_45">Alternatively you can use constants that are stored in single static class and use them with the &quot;Properties&quot; system.</p></div>
</blockquote>
<p id="-2054205743#-i1jgjh_39">Example for the configuration with constants:</p><div class="detached code-block" id="-2054205743#-i1jgjh_40"><pre><code class="language-csharp">public static class EnemyConfigurationConstants
{
    public const string ENEMY_NAME_BESTIARY_WOLF = &quot;Wolf&quot;;
    public const string ENEMY_DESCRIPTION_BESTIARY_WOLF = &quot;A wolf is a large canine native to North America.&quot;;
}

public class Enemy : MonoBehaviour, IWithName&lt;BestiaryContext&gt;, IWithDescription&lt;BestiaryContext&gt;
{
    string IWithName&lt;BestiaryContext&gt;.Name =&gt; EnemyConfigurationConstants.ENEMY_NAME_BESTIARY_WOLF;
    string IWithDescription&lt;BestiaryContext&gt;.Description =&gt; EnemyConfigurationConstants.ENEMY_DESCRIPTION_BESTIARY_WOLF;
}</code></pre></div><p id="-2054205743#-i1jgjh_41">That allows for implementation of the configuration while avoiding the need to create a <span class="inline-code" id="-2054205743#-i1jgjh_46">ScriptableObject</span> for each type of object - this solution is intended for small projects where the configuration is not a big deal or projects maintained mostly by software developers who can easily handle code-level configuration.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Property calls are often inlined by the compiler (JIT or IL2CPP), so there should be no performance overhead, but this is not guaranteed as it was not properly tested (it is just an assumption based on the observation and analysis of the generated code).</p></div>
</blockquote>
</section><section><h2 id="-2054205743#custom-properties" data-toc="custom-properties#SystemCoreUtilityProperties.md-custom-properties">Custom properties</h2><p id="-2054205743#-i1jgjh_47">If you need to create a custom property, you can do it by creating a new interface that inherits from the <span class="inline-code" id="-2054205743#-i1jgjh_54">IWithProperty</span> interface.</p><div class="detached code-block" id="-2054205743#-i1jgjh_48"><pre><code class="language-csharp">public interface IWithCustomProperty&lt;TResultType, TUsageContext&gt; : IWithProperty&lt;IWithCustomProperty&lt;TResultType, TUsageContext&gt;, 
IWithCustomProperty&lt;TResultType, AnyUsageContext&gt;, TResultType, TUsageContext&gt;
{
    TResultType CustomProperty { get; }
    
    TResultType IWithProperty&lt;IWithCustomProperty&lt;TResultType, TUsageContext&gt;, IWithCustomProperty&lt;TResultType, AnyUsageContext&gt;, TResultType, TUsageContext&gt;.Property =&gt; CustomProperty;
}

public interface IWithCustomProperty
{
    [CanBeNull]
    public string GetCustomValue&lt;TResultType, TUsageContext&gt;()
        where TUsageContext : IUsageContext =&gt;
        IWithProperty&lt;IWithCustomProperty&lt;TResultType, TUsageContext&gt;, IWithCustomProperty&lt;TResultType, AnyUsageContext&gt;, TResultType, TUsageContext&gt;
            .GetProperty(this);
    }
}

public static class Extensions
{
    [CanBeNull]
    public static TResultType GetObjectCustomProperty&lt;TResultType, TUsageContext&gt;([NotNull] this object obj)
        where TUsageContext : IUsageContext =&gt;
        obj is IWithCustomProperty withCustomProperty
            ? withCustomProperty.GetCustomValue&lt;TResultType, TUsageContext&gt;()
            : default;
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is recommended to take a look at already implemented properties for reference on creating own ones as it is a bit complicated to handle all the generic parameters and explicit interface implementations. </p><p id="-2054205743#-i1jgjh_55">Also known as: just copy it and change the names ;)</p></div>
</blockquote>
<p id="-2054205743#-i1jgjh_50">This interface requires a few generic parameters: first one is interface type itself, second one is interface type itself, however context is set to <span class="inline-code" id="-2054205743#-i1jgjh_56">AnyUsageContext</span> (this is used to allow for easy implementation of getting data if context is not found on the object), third one is the type of the property, and the last one is the context in which the property exists.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Property type can be hardcoded or passed as a generic parameter depending on usage requirements.</p></div>
</blockquote>
<p id="-2054205743#-i1jgjh_52">Then you can use it in your class.</p><div class="detached code-block" id="-2054205743#-i1jgjh_53"><pre><code class="language-csharp">public class Enemy : MonoBehaviour, IWithCustomProperty&lt;int, BestiaryContext&gt;
{
    int IWithCustomProperty&lt;int, BestiaryContext&gt;.CustomProperty =&gt; 10;
}</code></pre></div></section><section><h2 id="-2054205743#anyusagecontext" data-toc="anyusagecontext#SystemCoreUtilityProperties.md-anyusagecontext">AnyUsageContext</h2><p id="-2054205743#-i1jgjh_57">The <span class="inline-code" id="-2054205743#-i1jgjh_60">AnyUsageContext</span> is a special context that is used to allow for easy implementation of getting data for any context if specified context is not found on the object. This is useful when you want to get data from the object but context existence is not guaranteed.</p><div class="detached code-block" id="-2054205743#-i1jgjh_58"><pre><code class="language-csharp">public class Enemy : MonoBehaviour, IWithCustomProperty&lt;int, AnyUsageContext&gt;
{
    int IWithCustomProperty&lt;int, AnyUsageContext&gt;.CustomProperty =&gt; 10;
}</code></pre></div><div class="detached code-block" id="-2054205743#-i1jgjh_59"><pre><code class="language-csharp">Enemy enemy = ...;
int customProperty = enemy.GetObjectCustomProperty&lt;int, BestiaryContext&gt;(); 
// This will return 10 as the context is not found on the object and the `AnyUsageContext` is used.</code></pre></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="941151517">Singleton</h1><p id="941151517#p75kfr_3">Singleton is an easy way to create a class that has only one instance and provides a global point of access to it.</p><section><h2 id="941151517#example-implementations" data-toc="example-implementations#SystemCoreSingleton.md-example-implementations">Example implementations</h2><div class="detached code-block" id="941151517#p75kfr_6"><pre><code class="language-csharp">public sealed class SingletonExample : ISingleton&lt;SingletonExample&gt;
{
    
}

public sealed class MonoSingletonExample : IMonoBehaviourSingleton&lt;MonoSingletonExample&gt;
{
    
}</code></pre></div></section><section><h2 id="941151517#acquiring-the-singleton-instance" data-toc="acquiring-the-singleton-instance#SystemCoreSingleton.md-acquiring-the-singleton-instance">Acquiring the singleton instance</h2><div class="detached code-block" id="941151517#p75kfr_7"><pre><code class="language-csharp">SingletonExample singleton = ISingleton&lt;SingletonExample&gt;.GetInstance();
MonoSingletonExample monoSingleton = IMonoBehaviourSingleton&lt;MonoSingletonExample&gt;.GetInstance();</code></pre></div><p id="941151517#p75kfr_8">This is way simpler than creating a singleton class with a static instance and a static method to access it.</p><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is not recommended to add custom static Instance properties to singleton classes that implement the ISingleton interface as it may lead to undefined behaviour as ISingleton instance already contains a protected static Instance property. </p><p id="941151517#p75kfr_10">This implementation/usage is not supported and any issues related to it will not be addressed.</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-2050905776">Values</h1><p id="-2050905776#hdm5ra_3">Values is a subsystem for handling custom values assigned to objects. Even if it supports adding static values to object instances, it is mainly used for dynamic values that are calculated on the fly.</p><section><h2 id="-2050905776#low-level-interfaces" data-toc="low-level-interfaces#SystemCoreValues.md-low-level-interfaces">Low-level Interfaces</h2><ul class="list" id="-2050905776#hdm5ra_11" start="1"><li class="list-item" id="-2050905776#hdm5ra_12"><p>IValue - represents a value and has a property to return the current value.</p></li><li class="list-item" id="-2050905776#hdm5ra_13"><p>IModifiableValue - represents a value that can be modified on the fly either by arithmetic or modifiers.</p></li><li class="list-item" id="-2050905776#hdm5ra_14"><p>IModifier - represents a modifier that can be applied to a value.</p></li></ul></section><section><h2 id="-2050905776#high-level-api" data-toc="high-level-api#SystemCoreValues.md-high-level-api">High-level API</h2><section><h3 id="-2050905776#staticvalue" data-toc="staticvalue#SystemCoreValues.md-staticvalue">StaticValue</h3><p id="-2050905776#hdm5ra_17">An abstract class that takes <span class="inline-code" id="-2050905776#hdm5ra_19">INumber</span> as a type parameter. It is used to represent a non-changing value assigned to an object. It is rarely used and was implemented to provide compatibility with the dynamic values via the <span class="inline-code" id="-2050905776#hdm5ra_20">IValue</span> interface.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is highly recommended to avoid using `StaticValue` and use `ModifiableValue` instead.</p></div>
</blockquote>
</section><section><h3 id="-2050905776#modifiablevalue" data-toc="modifiablevalue#SystemCoreValues.md-modifiablevalue">ModifiableValue</h3><p id="-2050905776#hdm5ra_21">An abstract class that takes <span class="inline-code" id="-2050905776#hdm5ra_24">INumber</span> as a type parameter. It is used to represent a value that can be modified on the fly. It is the most commonly used value type.</p><p id="-2050905776#hdm5ra_22">It has been designed to allow for easy modification of the value by using arithmetic operations or applying modifiers. This value type is used by features like Resources, Stats, and other dynamic values.</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is heavily recommended to use `ModifiableValue` for any entity property like speed, max health etc. as it allows for easy modification and handling of modifiers that can be applied to the value by things like buffs, debuffs, equipment, etc.</p></div>
</blockquote>
</section></section><section><h2 id="-2050905776#creating-a-custom-value" data-toc="creating-a-custom-value#SystemCoreValues.md-creating-a-custom-value">Creating a custom value</h2><p id="-2050905776#hdm5ra_25">To create a custom value, you need to create a class that inherits from <span class="inline-code" id="-2050905776#hdm5ra_36">ModifiableValue</span> and implement the abstract methods.</p><div class="detached code-block" id="-2050905776#hdm5ra_26"><pre><code class="language-csharp">public sealed class MaxHealthValue : ModifiableValue&lt;int32&gt;
{

}</code></pre></div><p id="-2050905776#hdm5ra_27">You can also set up an initial value in the constructor, however that approach is not recommended.</p><p id="-2050905776#hdm5ra_28">Value set in the constructor:</p><div class="detached code-block" id="-2050905776#hdm5ra_29"><pre><code class="language-csharp">public sealed class MaxHealthValue : ModifiableValue&lt;int32&gt;
{
    public MaxHealthValue()
    {
        SetBaseValue(100);    
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is recommended to set the initial value using IWithDefaultValue interface from the Numerics package.</p></div>
</blockquote>
<p id="-2050905776#hdm5ra_31">Example of setting the initial value using IWithDefaultValue:</p><div class="detached code-block" id="-2050905776#hdm5ra_32"><pre><code class="language-csharp">public sealed class MaxHealthValue : ModifiableValue&lt;int32&gt;, IWithDefaultValue&lt;int32&gt;
{
    public MaxHealthValue()
    {
        SetBaseValue(this.GetDefaultValue());
    }

    public int32 DefaultValue =&gt; 100;
}</code></pre></div><p id="-2050905776#hdm5ra_33">Of course according to that also the <span class="inline-code" id="-2050905776#hdm5ra_37">IWithMinLimit</span> and <span class="inline-code" id="-2050905776#hdm5ra_38">IWithMaxLimit</span> interfaces can be used to set the limits of the value. Limits are respected both by arithmetic operations and modifiers.</p><p id="-2050905776#hdm5ra_34">Example value with limits:</p><div class="detached code-block" id="-2050905776#hdm5ra_35"><pre><code class="language-csharp">public class ExampleLimitedValue : ModifiableValue&lt;float32&gt;, IWithMinLimit&lt;float32&gt;, IWithMaxLimit&lt;float32&gt;
{
    public float32 MinLimit =&gt; -10f;
    public float32 MaxLimit =&gt; 10f;
}</code></pre></div></section><section><h2 id="-2050905776#modifiers" data-toc="modifiers#SystemCoreValues.md-modifiers">Modifiers</h2><p id="-2050905776#hdm5ra_39">Modifiers are used to modify the value of a <span class="inline-code" id="-2050905776#hdm5ra_49">ModifiableValue</span>. They can be added and removed at any time. There are some basic modifiers implemented:</p><ul class="list" id="-2050905776#hdm5ra_40" start="1"><li class="list-item" id="-2050905776#hdm5ra_50"><p>AddFlatModifier - adds a flat value to the value (is executed as first modifier with priority 536_870_912)</p></li><li class="list-item" id="-2050905776#hdm5ra_51"><p>MultiplyModifier - multiplies the value by a given factor (is executed as second modifier with priority 1_073_741_824)</p></li><li class="list-item" id="-2050905776#hdm5ra_52"><p>AddModifier - adds a value to the value (is executed as third modifier with priority 2_147_483_648)</p></li></ul><p id="-2050905776#hdm5ra_41">All modifiers support IWithPriority interface to set the priority of the modifier. The lower the priority value, the earlier the modifier is applied. Those classes are abstract and should be inherited to create custom modifiers (to give context to the modifier).</p><p id="-2050905776#hdm5ra_42">Example of a custom modifier:</p><div class="detached code-block" id="-2050905776#hdm5ra_43"><pre><code class="language-csharp">public sealed class ExampleModifier : AddModifier&lt;float32&gt;
{
    public ExampleModifier(float32 value) : base(value)
    {
    }
}</code></pre></div><p id="-2050905776#hdm5ra_44">Example usage:</p><div class="detached code-block" id="-2050905776#hdm5ra_45"><pre><code class="language-csharp">var maxHealth = new MaxHealthValue();
maxHealth.AddModifier(new ExampleModifier(10));</code></pre></div><p id="-2050905776#hdm5ra_46">This allows for easy interpretation of the modifiers (unfortunately at quite large overhead cost, but nothing forbids you to create a few simple modifiers and use them in the code instead of having modifier for each different context).</p><p id="-2050905776#hdm5ra_47">Removing modifiers is also possible:</p><div class="detached code-block" id="-2050905776#hdm5ra_48"><pre><code class="language-csharp">maxHealth.RemoveModifier&lt;ExampleModifier&gt;();</code></pre></div></section><section><h2 id="-2050905776#advanced-modifier-creation" data-toc="advanced-modifier-creation#SystemCoreValues.md-advanced-modifier-creation">Advanced modifier creation</h2><p id="-2050905776#hdm5ra_53">You can also create way more advanced modifiers with custom logic. To do that you need to create a class that implements the <span class="inline-code" id="-2050905776#hdm5ra_56">IModifier</span> interface.</p><div class="detached code-block" id="-2050905776#hdm5ra_54"><pre><code class="language-csharp">public sealed class ExampleModifier : IModifier&lt;float32&gt;
{
    public uint Priority =&gt; 3_000_000_000; // Last in the queue (usually)
    
     public void Apply&lt;TNumberType&gt;(IModifiableValue&lt;TNumberType&gt; value) 
            where TNumberType : struct, INumber
        {
            if(value is not MaxHealthValue)
                return;
        
            if(amount is TNumberType valueToAdd)
                value.Multiply((float32) 0.5f);
        }

        public void Remove&lt;TNumberType&gt;(IModifiableValue&lt;TNumberType&gt; value) 
            where TNumberType : struct, INumber
        {
            if(value is not MaxHealthValue)
                return;
        
            if(amount is TNumberType valueToAdd)
                value.Multiply((float32) 2f);   
        }

        public int CompareTo(IPrioritySupport other) =&gt; Priority.CompareTo(other.Priority);
}</code></pre></div><p id="-2050905776#hdm5ra_55">This example is a purely custom modifier that halves the value of the <span class="inline-code" id="-2050905776#hdm5ra_57">MaxHealthValue</span> when applied and doubles it when removed. It also can be applied only to the <span class="inline-code" id="-2050905776#hdm5ra_58">MaxHealthValue</span> modifiable value thanks to additional safety check.</p></section><section><h2 id="-2050905776#arithmetic-operations" data-toc="arithmetic-operations#SystemCoreValues.md-arithmetic-operations">Arithmetic operations</h2><p id="-2050905776#hdm5ra_59">All arithmetic operations are supported by the <span class="inline-code" id="-2050905776#hdm5ra_63">ModifiableValue</span> class. They are implemented as methods that take a value to apply the operation to.</p><div class="detached code-block" id="-2050905776#hdm5ra_60"><pre><code class="language-csharp">var maxHealth = new MaxHealthValue();
maxHealth.Add(10);
maxHealth.Multiply(2);
maxHealth.Divide(2);
maxHealth.Subtract(10);</code></pre></div><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p><b id="-2050905776#hdm5ra_64">Modifiers and arithmetic operations are not compatible!</b></p><p id="-2050905776#hdm5ra_65">Arithmetic operations are designed to modify values that are somewhat predictable and can be easily calculated. Modifiers are designed to modify values in a more complex dynamic way with custom logic.</p></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>A good example for arithmetic operations is the Economy subsystem where you can easily add or subtract resource value thanks to it being a ModifiableValue.</p></div>
</blockquote>
</section><section><h2 id="-2050905776#conditionally-removable-modifiers" data-toc="conditionally-removable-modifiers#SystemCoreValues.md-conditionally-removable-modifiers">Conditionally removable modifiers</h2><p id="-2050905776#hdm5ra_66">There are also some cases when you want to remove a modifier for example after a certain time. To do that you can use the <span class="inline-code" id="-2050905776#hdm5ra_69">IConditionallyRemovable</span> interface from Core.Utility package.</p><div class="detached code-block" id="-2050905776#hdm5ra_67"><pre><code class="language-csharp">public sealed class ExampleModifier : AddModifier&lt;float32&gt;, IConditionallyRemovable
{
    public ExampleModifier(float32 value) : base(value)
    {
    }

    public bool IsRemovalConditionMet()
    {
        // This is just an example, you can use any condition here
        // it's just for god sake simplicity, you can also take custom
        // time from your game manager or any other source
        return DateTime.UtcNow.Year &gt; 2025;
    }
}</code></pre></div><p id="-2050905776#hdm5ra_68">This way you can easily remove the modifier after a certain time or when any other condition is met. Dynamically removable modifiers are always validated when the modifier is applied or removed or when the value is acquired.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="916674799">Economy</h1><p id="916674799#-6sg0t7_3">Economy is a subsystem responsible for handling resources in the game e.g. coins, health or anything that user can spend to gain something. It is a very important part of the game and should be designed carefully to make the game interesting and challenging.</p><section><h2 id="916674799#global-and-local-resources" data-toc="global-and-local-resources#SystemEconomy.md-global-and-local-resources">Global and Local resources</h2><p id="916674799#-6sg0t7_9">Resources are divided into two types: global and local. Global resources are singletons (exists only once) and are recommended to be used for resources that are shared between all players or for resources that are shared between multiple runs in rouge-like games.</p><p id="916674799#-6sg0t7_10">Local resources are resources that are unique per object - for example a local resource could be health of a entity or coins available for single vendor.</p></section><section><h2 id="916674799#creating-resources" data-toc="creating-resources#SystemEconomy.md-creating-resources">Creating resources</h2><p id="916674799#-6sg0t7_11">To create a resource you need to create a new class that extends <span class="inline-code" id="916674799#-6sg0t7_16">Resource</span>-type class.</p><div class="detached code-block" id="916674799#-6sg0t7_12"><pre><code class="language-csharp">public sealed class CoinsResource : GlobalResource&lt;CoinsResource, int32&gt;
{

}</code></pre></div><p id="916674799#-6sg0t7_13">First generic parameter is reference to the class itself (required only for global resources) and the second parameter is the type of the resource. In this case it is <span class="inline-code" id="916674799#-6sg0t7_17">int32</span> which means that the resource is an 32-bit integer.</p><p id="916674799#-6sg0t7_14">Similarly, you can create a local resource:</p><div class="detached code-block" id="916674799#-6sg0t7_15"><pre><code class="language-csharp">public sealed class HealthResource : LocalResource&lt;int32&gt;
{

}</code></pre></div></section><section><h2 id="916674799#using-resources" data-toc="using-resources#SystemEconomy.md-using-resources">Using resources</h2><p id="916674799#-6sg0t7_18">To use a global resource you can use the following code:</p><div class="detached code-block" id="916674799#-6sg0t7_19"><pre><code class="language-csharp">CoinsResource.Instance.Value.Add(10);</code></pre></div><p id="916674799#-6sg0t7_20">or</p><div class="detached code-block" id="916674799#-6sg0t7_21"><pre><code class="language-csharp">EconomyAPI.GetGlobalResource&lt;CoinsResource&gt;().Add(10);</code></pre></div><p id="916674799#-6sg0t7_22">To use a local resource you have to inform the system that specified object supports the resource:</p><div class="detached code-block" id="916674799#-6sg0t7_23"><pre><code class="language-csharp">public class EntityWithHealth : MonoBehaviour, IWithLocalResource&lt;HealthResource&gt;
{
    // This is implementation of HealthResource class-inherited interface
    HealthResource IWithLocalResource&lt;HealthResource&gt;.ResourceStorage { get; } =
            new HealthResource();
}</code></pre></div><p id="916674799#-6sg0t7_24">Then you can use the resource like this:</p><div class="detached code-block" id="916674799#-6sg0t7_25"><pre><code class="language-csharp">var entity = new EntityWithHealth();
if(entity.TryGetLocalResource&lt;HealthResource&gt;(out HealthResource health))
{
    health.SetValue(100);
}</code></pre></div></section><section><h2 id="916674799#supported-resource-operations" data-toc="supported-resource-operations#SystemEconomy.md-supported-resource-operations">Supported resource operations</h2><ul class="list" id="916674799#-6sg0t7_26" start="1"><li class="list-item" id="916674799#-6sg0t7_27"><p>Add(value) - adds specified value to the resource</p></li><li class="list-item" id="916674799#-6sg0t7_28"><p>Take(value) - takes specified value from the resource</p></li><li class="list-item" id="916674799#-6sg0t7_29"><p>Subtract(value) - subtracts specified value from the resource (same as Take)</p></li><li class="list-item" id="916674799#-6sg0t7_30"><p>SetValue(value) - sets the value of the resource to specified value</p></li><li class="list-item" id="916674799#-6sg0t7_31"><p>Amount - returns the current value of the resource</p></li><li class="list-item" id="916674799#-6sg0t7_32"><p>TryTake(value) - tries to take specified value from the resource and returns true if the operation was successful</p></li><li class="list-item" id="916674799#-6sg0t7_33"><p>HasEnough(value) - returns true if the resource has enough value to take specified amount</p></li><li class="list-item" id="916674799#-6sg0t7_34"><p>Reset() - resets the resource to its default value</p></li></ul></section><section><h2 id="916674799#support-for-iwithminlimit-iwitmaxlimit-and-iwithdefaultvalue" data-toc="support-for-iwithminlimit-iwitmaxlimit-and-iwithdefaultvalue#SystemEconomy.md-support-for-iwithminlimit-iwitmaxlimit-and-iwithdefaultvalue">Support for IWithMinLimit, IWitMaxLimit and IWithDefaultValue</h2><p id="916674799#-6sg0t7_35">Numeric interfaces are fully supported by the resource system. You can simply implement them onto your resource to limit the value of the resource or to set the default value.</p><div class="detached code-block" id="916674799#-6sg0t7_36"><pre><code class="language-csharp">public sealed class CoinsResource : GlobalResource&lt;CoinsResource, int32&gt;, 
IWithMinLimit&lt;int32&gt;, IWithMaxLimit&lt;int32&gt;, IWithDefaultValue&lt;int32&gt;
{
   public int32 DefaultValue =&gt; 1000;
   public int32 MaxLimit =&gt; 10000;
   public int32 MinLimit =&gt; 0;
}</code></pre></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-524164319">Status</h1><p id="-524164319#asgu5x_3">Status is a subsystem responsible for handling status effects like poison, slowness etc. In general status effects are considered to be either permanent or temporary. Permanent status effects are applied to the entity and stay there until removed.</p><section><h2 id="-524164319#object-with-status" data-toc="object-with-status#SystemStatus.md-object-with-status">Object with status</h2><p id="-524164319#asgu5x_18">The core of the system is <span class="inline-code" id="-524164319#asgu5x_22">IObjectWithStatus</span> interface which is responsible for representing an object that can have status effects. It contains methods to apply, remove, update and check status effects.</p><p id="-524164319#asgu5x_19">To create a custom object with status you need to create a class that implements the <span class="inline-code" id="-524164319#asgu5x_23">IObjectWithStatus</span> interface.</p><div class="detached code-block" id="-524164319#asgu5x_20"><pre><code class="language-csharp">public sealed class ExampleEntity : IObjectWithStatus
{
    // Entity implementation
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>It is recommended to use the `IObjectWithStatus` interface with a generic type to indicate that the entity supports specific status, however it is not required and may get ugly when you have a lot of status effects. </p><p id="-524164319#asgu5x_24">Alternatively you can use IWithBannedStatus interface to indicate that the entity does not support specific status (this exists as alternative).</p></div>
</blockquote>
</section><section><h2 id="-524164319#status-effect" data-toc="status-effect#SystemStatus.md-status-effect">Status effect</h2><p id="-524164319#asgu5x_25">The core of the system is IStatus interface which is responsible for representing a status effect. It contains callbacks which are called when the status is applied, removed or updated.</p><p id="-524164319#asgu5x_26">To create a custom status effect you need to create a class that implements the <span class="inline-code" id="-524164319#asgu5x_29">IStatus</span> interface.</p><div class="detached code-block" id="-524164319#asgu5x_27"><pre><code class="language-csharp">public sealed class StunnedStatus : IStatus
{
    public void OnStatusAdded(IObjectWithStatus entity)
    {
        // Apply entity stun
    }

    public void OnStatusRemoved(IObjectWithStatus entity)
    {
        // Remove entity stun
    }
}</code></pre></div><p id="-524164319#asgu5x_28">This type of status is considered to be a boolean-type status which can be either applied or removed, however cannot be stacked or 'filled'.</p></section><section><h2 id="-524164319#percentage-status-effect" data-toc="percentage-status-effect#SystemStatus.md-percentage-status-effect">Percentage status effect</h2><p id="-524164319#asgu5x_30">The percentage status effect is a type of status effect that is applied to a value and modifies it by a percentage. This type of status effect can be used for any status that has a duration (or any other percentage-based effect).</p><p id="-524164319#asgu5x_31">It has additional two callbacks that are called when the percentage reaches the minimum or maximum value.</p><p id="-524164319#asgu5x_32">To create a custom percentage status effect you need to create a class that implements <span class="inline-code" id="-524164319#asgu5x_35">IPercentageStatus</span> and implement the abstract methods.</p><div class="detached code-block" id="-524164319#asgu5x_33"><pre><code class="language-csharp">// Overcharge is a status that grants entity a temporary speed increase by 50%
// If entity kills an enemy while overcharged, the percentage is increased by 10%
// If entity overcharges to 100%, it gets stunned until the percentage drops to 0%
public sealed class OverChargeStatus : IPercentageStatus
{
    float IPercentageStatus.Percentage { get; set; }

    public override void OnStatusAdded(IObjectWithStatus entity)
    {
        // Apply entity speed increase by 50%
    }

    public override void OnStatusRemoved(IObjectWithStatus entity)
    {
        // Remove entity speed increase        
    }
    
    public void OnMaxPercentageReached(IObjectWithStatus objectWithStatus)
    {
        // Apply entity stun status
    }
    
    public void OnMinPercentageReached(IObjectWithStatus objectWithStatus)
    {
        // Remove entity stun status
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Percentage status is limited to 0-100% range.</p></div>
</blockquote>
</section><section><h2 id="-524164319#stackable-status-effect" data-toc="stackable-status-effect#SystemStatus.md-stackable-status-effect">Stackable status effect</h2><p id="-524164319#asgu5x_36">The stackable status effect is a type of status effect that can be stacked on top of each other. This type of status effect can be used for any status that can be stacked or 'filled' where a good example would be a speed buff that can be stacked multiple times.</p><p id="-524164319#asgu5x_37">It has a few additional callbacks that are called when status stack is changed, or maximum/minimum stack is reached. Stack can go negative, however, it is not recommended to use it in that way.</p><p id="-524164319#asgu5x_38">To create a custom stackable status effect you need to create a class that implements <span class="inline-code" id="-524164319#asgu5x_42">IStackableStatus</span> and implement the abstract methods.</p><div class="detached code-block" id="-524164319#asgu5x_39"><pre><code class="language-csharp">// SpeedBoost is a status that grants entity a temporary speed increase by 10%
// If entity kills an enemy while speed boosted, the stack is increased by 1
// If entity gets hit while speed boosted, the stack is decreased by 1
public sealed class SpeedBoostStatus : IStackableStatus
{
    int32 IStackableStatus.StackCount { get; set; }

    public override void OnStatusAdded(IObjectWithStatus entity)
    {
        // Do nothing, stack changed callback will be called
    }

    public override void OnStatusRemoved(IObjectWithStatus entity)
    {
        // Do nothing, stack changed callback will be called
    }

    public void OnStackChanged(IObjectWithStatus objectWithStatus, int amount)
    {
        // Apply entity speed increase or decrease depending on the amount
    }

    public void OnMaxStackReached(IObjectWithStatus objectWithStatus)
    {
    }

    public void OnMinStackReached(IObjectWithStatus objectWithStatus)
    {
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Stack changed callback is called also when the status is added (then it has one stack).</p></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>When status is removed by force all StackChanged callbacks are called with respective values.</p></div>
</blockquote>
</section><section><h2 id="-524164319#stackable-percentage-status-effect" data-toc="stackable-percentage-status-effect#SystemStatus.md-stackable-percentage-status-effect">Stackable Percentage status effect</h2><p id="-524164319#asgu5x_43">Sometimes you want to combine properties of stackable and percentage status effects. This can be good for example for poison status which deals damage over time and can be stacked, but also is reduced over time.</p><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Do not create stackable percentage status effects without IStackablePercentageStatus interface as it may lead to issues with the system - IStackablePercentageStatus interface implements logic for a few methods from other interfaces and is required for proper functionality that will meet your expectations.</p></div>
</blockquote>
<p id="-524164319#asgu5x_45">To create a custom stackable percentage status effect you need to create a class that implement <span class="inline-code" id="-524164319#asgu5x_49">IStackablePercentageStatus</span> and implement the abstract methods.</p><div class="detached code-block" id="-524164319#asgu5x_46"><pre><code class="language-csharp">// Poison is a status that deals 10% of entity health as damage over time
public sealed class PoisonStatus : IStackablePercentageStatus
{
    int32 IStackableStatus.StackCount { get; set; }
    float IPercentageStatus.Percentage { get; set; }

    public override void OnStatusAdded(IObjectWithStatus entity)
    {
    }

    public override void OnStatusRemoved(IObjectWithStatus entity)
    {
    }

    public void OnStackChanged(IObjectWithStatus objectWithStatus, int amount)
    {
    }

    public void OnMaxStackReached(IObjectWithStatus objectWithStatus)
    {
    }

    public void OnMinStackReached(IObjectWithStatus objectWithStatus)
    {
    }
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Stackable percentage status percentage is limited to 0-100% range. Stack is not limited, however negative stack behaviour is considered undefined and should be avoided as any issues related to it probably won't be addressed.</p></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If stackable status percentage gets up to 100% then the percentage is reset to 0% and stack is increased by 1. Same applies if percentage is decreased to 0% then stack is decreased by 1 and percentage is reset to 100% unless stack is 0.</p></div>
</blockquote>
</section><section><h2 id="-524164319#automatic-status-removal" data-toc="automatic-status-removal#SystemStatus.md-automatic-status-removal">Automatic status removal</h2><p id="-524164319#asgu5x_50">Statues are removed automatically if:</p><ul class="list" id="-524164319#asgu5x_51" start="1"><li class="list-item" id="-524164319#asgu5x_52"><p>Status is a percentage status and percentage is 0% after update.</p></li><li class="list-item" id="-524164319#asgu5x_53"><p>Status is a stackable status and stack is 0 after update.</p></li><li class="list-item" id="-524164319#asgu5x_54"><p>Status is a stackable percentage status and percentage reaches 0% and stack is 0 after update.</p></li></ul></section><section><h2 id="-524164319#applying-status" data-toc="applying-status#SystemStatus.md-applying-status">Applying status</h2><p id="-524164319#asgu5x_55">To apply a status to an entity you need to call the <span class="inline-code" id="-524164319#asgu5x_57">ApplyStatus</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_56"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
IStatus status = new StunnedStatus();
entity.AddStatus(status);</code></pre></div></section><section><h2 id="-524164319#removing-status" data-toc="removing-status#SystemStatus.md-removing-status">Removing status</h2><p id="-524164319#asgu5x_58">To remove a status from an entity you need to call the <span class="inline-code" id="-524164319#asgu5x_60">RemoveStatus</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_59"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
entity.RemoveStatus&lt;StunnedStatus&gt;();</code></pre></div></section><section><h2 id="-524164319#updating-status" data-toc="updating-status#SystemStatus.md-updating-status">Updating status</h2><p id="-524164319#asgu5x_61">To update a status you need to call the respective method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_62"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
entity.IncreaseStatusPercentage&lt;OverChargeStatus&gt;(10);
entity.DecreaseStatusPercentage&lt;OverChargeStatus&gt;(10);
entity.IncreaseStatusStack&lt;SpeedBoostStatus&gt;(1);
entity.DecreaseStatusStack&lt;SpeedBoostStatus&gt;(1);
entity.IncreaseStatusStack&lt;PoisonStatus&gt;(1);
entity.DecreaseStatusStack&lt;PoisonStatus&gt;(1);
entity.IncreaseStatusPercentage&lt;PoisonStatus&gt;(10);
entity.DecreaseStatusPercentage&lt;PoisonStatus&gt;(10);</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>If status is not present on the entity, the methods will automatically apply it if necessary.</p></div>
</blockquote>
</section><section><h2 id="-524164319#checking-status" data-toc="checking-status#SystemStatus.md-checking-status">Checking status</h2><p id="-524164319#asgu5x_64">To check if an entity has a status you need to call the <span class="inline-code" id="-524164319#asgu5x_66">HasStatus</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_65"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
bool isStunned = entity.HasStatus&lt;StunnedStatus&gt;();</code></pre></div></section><section><h2 id="-524164319#getting-status-instance" data-toc="getting-status-instance#SystemStatus.md-getting-status-instance">Getting status instance</h2><p id="-524164319#asgu5x_67">To get the status instance from the entity you need to call the <span class="inline-code" id="-524164319#asgu5x_69">GetStatus</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_68"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
IStatus status = entity.GetStatus&lt;StunnedStatus&gt;();</code></pre></div></section><section><h2 id="-524164319#getting-status-stack-count" data-toc="getting-status-stack-count#SystemStatus.md-getting-status-stack-count">Getting status stack count</h2><p id="-524164319#asgu5x_70">To get the status stack count from the entity you need to call the <span class="inline-code" id="-524164319#asgu5x_75">GetStatusStackCount</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_71"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
int stackCount = entity.GetStatusStackCount&lt;SpeedBoostStatus&gt;();</code></pre></div><p id="-524164319#asgu5x_72">There is also an alternative way to get the status stack count from the entity.</p><div class="detached code-block" id="-524164319#asgu5x_73"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
int stackCount = entity.GetAmountOfTimesStatusIsAdded&lt;SpeedBoostStatus&gt;();</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>This method allows to check either for stackable or non-stackable status.</p></div>
</blockquote>
</section><section><h2 id="-524164319#getting-status-percentage" data-toc="getting-status-percentage#SystemStatus.md-getting-status-percentage">Getting status percentage</h2><p id="-524164319#asgu5x_76">To get the status percentage from the entity you need to call the <span class="inline-code" id="-524164319#asgu5x_78">GetStatusPercentage</span> method on the entity.</p><div class="detached code-block" id="-524164319#asgu5x_77"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
float percentage = entity.GetStatusPercentage&lt;OverChargeStatus&gt;();</code></pre></div></section><section><h2 id="-524164319#advanced-status-support-checking" data-toc="advanced-status-support-checking#SystemStatus.md-advanced-status-support-checking">Advanced status support checking</h2><p id="-524164319#asgu5x_79">Also, a custom interface exists to indicate that entity supports specific status.</p><div class="detached code-block" id="-524164319#asgu5x_80"><pre><code class="language-csharp">public class ExampleEntity : IObjectWithStatus&lt;StunnedStatus&gt;
{
    // Entity implementation
}</code></pre></div><p id="-524164319#asgu5x_81">This allows to use an additional method to check if the entity supports the status.</p><div class="detached code-block" id="-524164319#asgu5x_82"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
bool canBeStunned = entity.IsStatusExplicitlySupported&lt;StunnedStatus&gt;();</code></pre></div><p id="-524164319#asgu5x_83">Also, a simple method to check if the entity supports status at all (checks only if the status is not banned, not if it is explicitly supported via <span class="inline-code" id="-524164319#asgu5x_89">IObjectWithStatus</span> generic interface).</p><div class="detached code-block" id="-524164319#asgu5x_84"><pre><code class="language-csharp">IObjectWithStatus entity = ...;
bool canHaveStatus = entity.IsStatusSupported&lt;StunnedStatus&gt;();</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>This can be useful when you want to check if the entity supports a specific status without checking the type. For example: when your boss cannot be stunned, but other entities can.</p></div>
</blockquote>
<p id="-524164319#asgu5x_86">Also, a custom interface exists to indicate that entity does not support specific status.</p><div class="detached code-block" id="-524164319#asgu5x_87"><pre><code class="language-csharp">public class ExampleEntity : IWithBannedStatus&lt;StunnedStatus&gt;
{
    // Entity implementation
}</code></pre></div><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>IWithBannedStatus takes precedence over IObjectWithStatus, so even if entity indicates that status is supported, it will not be applied if IWithBannedStatus for the status exists, even if it is deeper in the inheritance hierarchy.</p></div>
</blockquote>
</section></article></div></section></div></body></html>